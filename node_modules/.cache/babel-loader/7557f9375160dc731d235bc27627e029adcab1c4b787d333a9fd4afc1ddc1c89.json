{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rhiannonhayes/Desktop/sew-lovely-react-final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rhiannonhayes/Desktop/sew-lovely-react-final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rhiannonhayes/Desktop/sew-lovely-react-final/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams}from\"react-router-dom\";import ProductListPage from'./ProductListPage';import{jsx as _jsx}from\"react/jsx-runtime\";var ProductList=function ProductList(){var _useParams=useParams(),sku=_useParams.sku;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var fetchProduct=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,transformedProducts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return fetch(\"https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=\".concat(sku));case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(\"Something went wrong :(\");case 7:_context.next=9;return response.json();case 9:data=_context.sent;console.log(\"DATA\",data);transformedProducts=data.results.map(function(result){return{id:result.id,sku:result.sku,title:result.title,image:result.imageUrl,price:result.price,msrp:result.msrp,url:result.url,description:result.description,brand:result.brand,quantity_available:result.quantity_available,sizes:result.size};});setProduct(transformedProducts);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 18:setLoading(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);})),[]);useEffect(function(){fetchProduct();},[fetchProduct]);var content=/*#__PURE__*/_jsx(\"p\",{children:\"Found no movies\"});if(product.length>0){content=/*#__PURE__*/_jsx(ProductListPage,{products:product});}if(loading){content=/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{children:content});};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","ProductListPage","ProductList","sku","loading","setLoading","product","setProduct","fetchProduct","fetch","response","ok","Error","json","data","console","log","transformedProducts","results","map","result","id","title","image","imageUrl","price","msrp","url","description","brand","quantity_available","sizes","size","content","length"],"sources":["/Users/rhiannonhayes/Desktop/sew-lovely-react-final/src/components/Products/PLP/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams } from \"react-router-dom\";\n\nimport ProductListPage from './ProductListPage';\n\nconst ProductList = () => {\n\n    const {sku} = useParams();\n    const [loading, setLoading] = useState(false);\n    const [product ,setProduct] = useState([]);\n\n    const fetchProduct = useCallback(async () => {\n      setLoading(true)\n\n        try {\n            const response = await fetch(`https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=${sku}`);\n      \n            if(!response.ok) {\n              throw new Error(\"Something went wrong :(\")\n            }\n      \n            const data = await response.json();\n            console.log(\"DATA\", data)\n\n            const transformedProducts = data.results.map( result =>\n              {\n                return ({\n                  id: result.id,\n                  sku: result.sku,\n                  title: result.title,\n                  image: result.imageUrl,\n                  price: result.price,\n                  msrp: result.msrp,\n                  url: result.url,\n                  description: result.description,\n                  brand: result.brand,\n                  quantity_available: result.quantity_available,\n                  sizes: result.size,\n                });    \n              }\n            );\n\n            setProduct(transformedProducts)\n            \n          } catch (error) {\n            console.log(error)\n        }\n\n     setLoading(false);\n      }, []);\n\n      useEffect(() => {\n        fetchProduct();\n      }, [fetchProduct]);\n\n      let content = <p>Found no movies</p>\n\n      if(product.length > 0) {\n        content = <ProductListPage products={product}/>\n       }\n \n       if(loading) {\n         content = <p>Loading...</p>\n       }\n\n        return (\n            <div>{content}</div>\n          );\n\n}\n\nexport default ProductList;"],"mappings":"2aAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,KAAQ,kBAAkB,CAE5C,MAAOC,gBAAe,KAAM,mBAAmB,CAAC,2CAEhD,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CAEtB,eAAcF,SAAS,EAAE,CAAlBG,GAAG,YAAHA,GAAG,CACV,cAA8BN,QAAQ,CAAC,KAAK,CAAC,wCAAtCO,OAAO,eAAEC,UAAU,eAC1B,eAA8BR,QAAQ,CAAC,EAAE,CAAC,yCAAnCS,OAAO,eAAEC,UAAU,eAE1B,GAAMC,aAAY,CAAGT,WAAW,wEAAC,2KAC/BM,UAAU,CAAC,IAAI,CAAC,uCAGaI,MAAK,wGAAiGN,GAAG,EAAG,QAA7HO,QAAQ,kBAEVA,QAAQ,CAACC,EAAE,8BACP,IAAIC,MAAK,CAAC,yBAAyB,CAAC,8BAGzBF,SAAQ,CAACG,IAAI,EAAE,QAA5BC,IAAI,eACVC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEF,IAAI,CAAC,CAEnBG,mBAAmB,CAAGH,IAAI,CAACI,OAAO,CAACC,GAAG,CAAE,SAAAC,MAAM,CAClD,CACE,MAAQ,CACNC,EAAE,CAAED,MAAM,CAACC,EAAE,CACblB,GAAG,CAAEiB,MAAM,CAACjB,GAAG,CACfmB,KAAK,CAAEF,MAAM,CAACE,KAAK,CACnBC,KAAK,CAAEH,MAAM,CAACI,QAAQ,CACtBC,KAAK,CAAEL,MAAM,CAACK,KAAK,CACnBC,IAAI,CAAEN,MAAM,CAACM,IAAI,CACjBC,GAAG,CAAEP,MAAM,CAACO,GAAG,CACfC,WAAW,CAAER,MAAM,CAACQ,WAAW,CAC/BC,KAAK,CAAET,MAAM,CAACS,KAAK,CACnBC,kBAAkB,CAAEV,MAAM,CAACU,kBAAkB,CAC7CC,KAAK,CAAEX,MAAM,CAACY,IAChB,CAAC,CACH,CAAC,CACF,CAEDzB,UAAU,CAACU,mBAAmB,CAAC,kFAG/BF,OAAO,CAACC,GAAG,aAAO,SAGzBX,UAAU,CAAC,KAAK,CAAC,CAAC,qEAChB,GAAE,EAAE,CAAC,CAENP,SAAS,CAAC,UAAM,CACdU,YAAY,EAAE,CAChB,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB,GAAIyB,QAAO,cAAG,sCAAsB,CAEpC,GAAG3B,OAAO,CAAC4B,MAAM,CAAG,CAAC,CAAE,CACrBD,OAAO,cAAG,KAAC,eAAe,EAAC,QAAQ,CAAE3B,OAAQ,EAAE,CAChD,CAEA,GAAGF,OAAO,CAAE,CACV6B,OAAO,cAAG,iCAAiB,CAC7B,CAEC,mBACI,qBAAMA,OAAO,EAAO,CAGhC,CAAC,CAED,cAAe/B,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}