{"ast":null,"code":"var _jsxFileName = \"/Users/rhiannonhayes/Desktop/03-starting-project-APIs copy/src/components/Products/PDP/Products.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport ProductDisplayPage from './ProductDisplayPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [query, setQuery] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageData, setPageData] = useState({});\n  useEffect(() => {\n    fetchProducts(currentPage);\n  }, [query, currentPage]);\n  function fetchPosts() {\n    const URL = `https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=${query}&page=${currentPage}`;\n    return fetch(URL, {\n      method: 'GET'\n    }).then(response => Promise.all([response, response.json()]));\n  }\n  fetchPosts();\n\n  // const fetchProducts = useCallback(async () => {\n\n  //   setLoading(true)\n\n  //     try {\n\n  //         const response = await fetch(`https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=${query}&page=${currentPage}`);\n\n  //         if(!response.ok) {\n  //           throw new Error(\"Something went wrong :(\")\n  //         }\n\n  //         const data = await response.json();\n\n  //         console.log(data)\n\n  //         const transformedProducts = data.results.map(result =>\n  //           {\n  //             return ({\n  //               id: result.id,\n  //               sku: result.sku,\n  //               title: result.title,\n  //               image: result.imageUrl,\n  //               price: result.price,\n  //               msrp: result.msrp,\n  //               url: result.url,\n  //             });    \n  //           }\n  //         );\n\n  //         setPageData(data.pagination);\n\n  //         setProducts(transformedProducts)\n\n  //       } catch (error) {\n  //         console.log(error)\n  //     }\n\n  //  setLoading(false);\n  //   }, [query, currentPage]);\n\n  const updateSearch = e => {\n    setSearch(e.target.value);\n  };\n  const getSearch = e => {\n    e.preventDefault();\n    setQuery(search);\n    setSearch('');\n  };\n  const prevPageHandler = () => {\n    setCurrentPage(pageData.currentPage - 1);\n  };\n  const nextPageHandler = () => {\n    setCurrentPage(pageData.currentPage + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: getSearch,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: search,\n        onChange: updateSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 20\n    }, this) : '', products.length == 0 && !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 46\n    }, this), products.length > 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [pageData.totalResults, \" results\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductDisplayPage, {\n        products: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Page \", pageData.currentPage, \" of \", pageData.totalPages]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), pageData.previousPage !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        value: pageData.previousPage,\n        onClick: prevPageHandler,\n        children: \"\\u2190\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 41\n      }, this), pageData.nextPage !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        value: pageData.nextPage,\n        onClick: nextPageHandler,\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(Products, \"/9h9heJBLvCE7lTVPUh3EkiI9PE=\");\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","ProductDisplayPage","Products","loading","setLoading","products","setProducts","search","setSearch","query","setQuery","currentPage","setCurrentPage","pageData","setPageData","fetchProducts","fetchPosts","URL","fetch","method","then","response","Promise","all","json","updateSearch","e","target","value","getSearch","preventDefault","prevPageHandler","nextPageHandler","length","totalResults","totalPages","previousPage","nextPage"],"sources":["/Users/rhiannonhayes/Desktop/03-starting-project-APIs copy/src/components/Products/PDP/Products.js"],"sourcesContent":["import React, { useState, useEffect,useCallback } from 'react';\nimport ProductDisplayPage from './ProductDisplayPage';\n\nconst Products = () => {\n\n    const [loading, setLoading] = useState(false);\n    const [products ,setProducts] = useState([]);\n    const [search, setSearch] = useState(\"\");\n    const [query, setQuery] = useState(\"\");\n    const [currentPage, setCurrentPage] = useState(1);\n    const [pageData, setPageData] = useState({});\n\n    useEffect(() => {\n      fetchProducts(currentPage);\n    }, [query, currentPage]);\n\n\n    function fetchPosts() {\n      const URL = `https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=${query}&page=${currentPage}`;\n      return fetch(URL, { method: 'GET'})\n         .then( response => Promise.all([response, response.json()]));\n    }\n\n    fetchPosts();\n\n    // const fetchProducts = useCallback(async () => {\n\n    //   setLoading(true)\n\n    //     try {\n\n    //         const response = await fetch(`https://scmq7n.a.searchspring.io/api/search/search.json?resultsFormat=native&siteId=scmq7n&q=${query}&page=${currentPage}`);\n      \n    //         if(!response.ok) {\n    //           throw new Error(\"Something went wrong :(\")\n    //         }\n      \n    //         const data = await response.json();\n\n    //         console.log(data)\n\n    //         const transformedProducts = data.results.map(result =>\n    //           {\n    //             return ({\n    //               id: result.id,\n    //               sku: result.sku,\n    //               title: result.title,\n    //               image: result.imageUrl,\n    //               price: result.price,\n    //               msrp: result.msrp,\n    //               url: result.url,\n    //             });    \n    //           }\n    //         );\n\n    //         setPageData(data.pagination);\n\n    //         setProducts(transformedProducts)\n            \n    //       } catch (error) {\n    //         console.log(error)\n    //     }\n\n    //  setLoading(false);\n    //   }, [query, currentPage]);\n\n      const updateSearch = (e) => {\n        setSearch(e.target.value)\n      }\n\n      const getSearch = (e) => {\n        e.preventDefault();\n        setQuery(search)\n        setSearch('')\n      }\n\n\n      const prevPageHandler = () => {\n        setCurrentPage(pageData.currentPage - 1)\n      }\n\n      const nextPageHandler = () => {\n        setCurrentPage(pageData.currentPage + 1)\n      }\n\n      return (\n        <>\n        <form onSubmit={getSearch}>\n            <input type=\"text\" value={search} onChange={updateSearch}/>\n            <button type=\"submit\">Submit</button>\n         </form>\n        {loading ? <p>Loading...</p> : ''}\n        {products.length == 0 && !loading && <p>No products</p>}\n        {products.length > 0 && !loading && \n        <div>\n        <p>{pageData.totalResults} results</p>\n        <ProductDisplayPage products={products} />\n        <p>Page {pageData.currentPage} of {pageData.totalPages}</p>\n        {pageData.previousPage !== 0 && <button value={pageData.previousPage} onClick={prevPageHandler}>←</button>}\n        {pageData.nextPage !== 0 && <button value={pageData.nextPage} onClick={nextPageHandler}>→</button>}\n        </div>}\n        </>\n      )\n}\n\nexport default Products; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}